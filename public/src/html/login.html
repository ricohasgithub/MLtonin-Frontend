<!DOCTYPE html>

<html>

<head>

  <link type = "text/css" rel = "stylesheet" href = "../css/form.css"/>

  <!-- The core Firebase JS SDK is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-app.js"></script>

  <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-firestore.js"></script>

  <script>
    // Your web app's Firebase configuration
    var firebaseConfig = {
      apiKey: "AIzaSyA6wZISMpsD6dkmiX1R-kdYLeDlaJcz1Ps",
      authDomain: "electriccityhacks4.firebaseapp.com",
      databaseURL: "https://electriccityhacks4.firebaseio.com",
      projectId: "electriccityhacks4",
      storageBucket: "electriccityhacks4.appspot.com",
      messagingSenderId: "1043458520100",
      appId: "1:1043458520100:web:193877abed0f65232614b1",
      measurementId: "G-T8XSNTMXT1"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
  </script>

</head>

<body>

  <div id="def-log-in">
    <form>
      <div>
        <label for="username">Username:</label>
        <input id="email" type="text" name="username" placeholder="mysupercoolemail@hmail.com"> <br>
      </div>
      <div>
        <label for="password">Password:</label>
        <input id="password" type="password" name="password" placeholder="hunter2">
      <div/>
      <div>
        <input id="log-in" type="submit" value="Log in">
      </div>

  <!--Handle auth events-->
  <script>
    firebase.auth().onAuthStateChanged(function(user) {
      console.log(user);
      if (user !== null) {
        window.location = "user.html";
      }
    });
  </script>

  <!--Handle page events-->
  <script>
    document.querySelector('#log-in').addEventListener('click', function(e) {
      // Prevent refreshing to get POST data and prevent null auths
      e.preventDefault();
      e.stopPropagation();
      // Get query email and password info
      let email = document.querySelector('#email').value;;
      let password = document.querySelector('#password').value;
      // Firebase sign in
      firebase.auth().signInWithEmailAndPassword(email, password).catch(function(error) {
        // Handle Errors here.
        var errorCode = error.code;
        var errorMessage = error.message;
        console.log(errorCode);
        console.log(errorMessage);
      })
    });
  </script>

</body>

</html>
